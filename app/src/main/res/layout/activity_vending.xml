<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/gradient_background_main"
    android:clipChildren="false"
    android:clipToPadding="false">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:clipChildren="false"
        android:clipToPadding="false"
        android:gravity="center"
        android:orientation="vertical"
        android:padding="@dimen/main_screen_padding">

        <!-- Header with Back Button and Centered Logo/Wordmark -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="@dimen/header_height"
            android:layout_marginBottom="@dimen/header_margin_bottom"
            android:gravity="center_vertical">

            <!-- Back Button - positioned absolutely to not affect centering -->
            <FrameLayout
                android:layout_width="@dimen/back_button_size"
                android:layout_height="match_parent"
                android:gravity="center_vertical">

                <ImageButton
                    android:id="@+id/backButton"
                    android:layout_width="@dimen/back_button_size"
                    android:layout_height="@dimen/back_button_size"
                    android:alpha="0.9"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="@string/back_button"
                    android:padding="@dimen/back_button_padding"
                    android:scaleType="fitCenter"
                    android:src="@drawable/ic_arrow_back"
                    app:tint="@android:color/white" />

            </FrameLayout>

            <!-- Centered Logo and Wordmark - this will be truly centered now -->
            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:gravity="center"
                android:orientation="horizontal">

                <ImageView
                    android:layout_width="@dimen/header_logo_size"
                    android:layout_height="@dimen/header_logo_size"
                    android:layout_marginEnd="20dp"
                    android:contentDescription="@string/waterfountain_logo"
                    android:scaleType="fitCenter"
                    android:src="@drawable/logo" />

                <TextView
                    android:text="@string/wordmark_text"
                    android:contentDescription="@string/waterfountain_wordmark"
                    style="@style/WordmarkTextStyle.Small" />

            </LinearLayout>

            <!-- Empty space to balance the back button -->
            <View
                android:layout_width="@dimen/back_button_size"
                android:layout_height="match_parent" />

        </LinearLayout>

        <!-- Main Content Area - Properly centered with upward adjustment -->
        <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:clipChildren="false"
            android:clipToPadding="false">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                android:layout_marginBottom="100dp"
                android:clipChildren="false"
                android:clipToPadding="false"
                android:gravity="center"
                android:orientation="vertical">

                <!-- Title with improved hierarchy -->
                <TextView
                    android:id="@+id/titleText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="@dimen/margin_medium"
                    android:fontFamily="sans-serif-medium"
                    android:gravity="center"
                    android:letterSpacing="0.01"
                    android:text="Choose Your Verification"
                    android:textColor="@android:color/white"
                    android:textSize="@dimen/text_size_title" />

                <!-- Subtitle with better contrast -->
                <TextView
                    android:id="@+id/subtitleText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="48dp"
                    android:fontFamily="sans-serif-light"
                    android:gravity="center"
                    android:letterSpacing="0.02"
                    android:text="Fast, free, and secure"
                    android:textColor="#CCFFFFFF"
                    android:textSize="@dimen/text_size_subtitle" />

                <!-- Option Cards with improved design -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginHorizontal="40dp"
                    android:clipChildren="false"
                    android:clipToPadding="false"
                    android:gravity="center"
                    android:orientation="horizontal">

                    <!-- SMS Option - Active (left) - Redesigned -->
                    <LinearLayout
                        android:id="@+id/smsCard"
                        android:layout_width="0dp"
                        android:layout_height="@dimen/card_height"
                        android:layout_marginEnd="@dimen/card_margin"
                        android:layout_weight="1"
                        android:background="@drawable/glass_card_background"
                        android:clickable="true"
                        android:elevation="@dimen/card_elevation"
                        android:focusable="true"
                        android:gravity="center"
                        android:orientation="vertical"
                        android:padding="@dimen/card_padding">

                        <!-- Icon with better visual weight -->
                        <ImageView
                            android:layout_width="@dimen/card_icon_size"
                            android:layout_height="@dimen/card_icon_size"
                            android:layout_marginBottom="@dimen/margin_large"
                            android:contentDescription="Phone icon"
                            android:src="@drawable/ic_phone_elegant"
                            app:tint="#2c3e50" />

                        <!-- Card title with better hierarchy -->
                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="@dimen/margin_small"
                            android:fontFamily="sans-serif-medium"
                            android:gravity="center"
                            android:letterSpacing="-0.01"
                            android:text="Phone Number"
                            android:textColor="#2c3e50"
                            android:textSize="@dimen/card_title_size" />

                        <!-- Tagline -->
                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginBottom="@dimen/margin_medium"
                            android:fontFamily="sans-serif"
                            android:gravity="center"
                            android:text="No app needed"
                            android:textColor="#546e7a"
                            android:textSize="@dimen/card_subtitle_size" />

                        <!-- Feature list with better spacing -->
                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:fontFamily="sans-serif-light"
                            android:gravity="center"
                            android:lineSpacingExtra="6dp"
                            android:lineSpacingMultiplier="1.2"
                            android:text="Works offline\nPrivacy focused\nQuick verification"
                            android:textColor="#607d8b"
                            android:textSize="@dimen/card_text_size" />

                    </LinearLayout>

                    <!-- PIN Code Option - Disabled/Coming Soon (center) -->
                    <FrameLayout
                        android:id="@+id/pinCodeCard"
                        android:layout_width="0dp"
                        android:layout_height="@dimen/card_height"
                        android:layout_marginHorizontal="@dimen/card_margin"
                        android:layout_weight="1"
                        android:alpha="0.5"
                        android:background="@drawable/glass_card_background"
                        android:clickable="false"
                        android:elevation="@dimen/card_elevation"
                        android:focusable="false">

                        <!-- Base card content -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:gravity="center"
                            android:orientation="vertical"
                            android:padding="@dimen/card_padding">

                            <ImageView
                                android:layout_width="@dimen/card_icon_size"
                                android:layout_height="@dimen/card_icon_size"
                                android:layout_marginBottom="@dimen/margin_large"
                                android:alpha="0.4"
                                android:contentDescription="PIN Code icon"
                                android:src="@drawable/ic_pin_code"
                                app:tint="#2c3e50" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="@dimen/margin_small"
                                android:alpha="0.4"
                                android:fontFamily="sans-serif-medium"
                                android:gravity="center"
                                android:letterSpacing="-0.01"
                                android:text="PIN Code"
                                android:textColor="#2c3e50"
                                android:textSize="@dimen/card_title_size" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="@dimen/margin_medium"
                                android:alpha="0.4"
                                android:fontFamily="sans-serif"
                                android:gravity="center"
                                android:text="From mobile app"
                                android:textColor="#546e7a"
                                android:textSize="@dimen/card_subtitle_size" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:alpha="0.4"
                                android:fontFamily="sans-serif-light"
                                android:gravity="center"
                                android:lineSpacingExtra="6dp"
                                android:lineSpacingMultiplier="1.2"
                                android:text="Account required\nMost secure\nFast verification"
                                android:textColor="#607d8b"
                                android:textSize="@dimen/card_text_size" />

                        </LinearLayout>

                        <!-- Rounded overlay with proper corners -->
                        <View
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:background="@drawable/overlay_rounded_background" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:gravity="center"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/coming_soon_rounded_background"
                                android:elevation="@dimen/card_elevation"
                                android:fontFamily="sans-serif-medium"
                                android:gravity="center"
                                android:letterSpacing="0.08"
                                android:paddingHorizontal="36dp"
                                android:paddingVertical="18dp"
                                android:text="COMING SOON"
                                android:textColor="@android:color/white"
                                android:textSize="@dimen/text_size_subtitle" />

                        </LinearLayout>

                    </FrameLayout>

                    <!-- QR Code Option - Disabled/Coming Soon (right) -->
                    <FrameLayout
                        android:id="@+id/qrCodeCard"
                        android:layout_width="0dp"
                        android:layout_height="@dimen/card_height"
                        android:layout_marginStart="@dimen/card_margin"
                        android:layout_weight="1"
                        android:alpha="0.5"
                        android:background="@drawable/glass_card_background"
                        android:clickable="false"
                        android:elevation="@dimen/card_elevation"
                        android:focusable="false">

                        <!-- Base card content -->
                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:gravity="center"
                            android:orientation="vertical"
                            android:padding="@dimen/card_padding">

                            <ImageView
                                android:layout_width="@dimen/card_icon_size"
                                android:layout_height="@dimen/card_icon_size"
                                android:layout_marginBottom="@dimen/margin_large"
                                android:alpha="0.4"
                                android:contentDescription="QR Code icon"
                                android:src="@drawable/ic_qr_code"
                                app:tint="#2c3e50" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="@dimen/margin_small"
                                android:alpha="0.4"
                                android:fontFamily="sans-serif-medium"
                                android:gravity="center"
                                android:letterSpacing="-0.01"
                                android:text="Scan QR Code"
                                android:textColor="#2c3e50"
                                android:textSize="@dimen/card_title_size" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginBottom="@dimen/margin_medium"
                                android:alpha="0.4"
                                android:fontFamily="sans-serif"
                                android:gravity="center"
                                android:text="Instant verification"
                                android:textColor="#546e7a"
                                android:textSize="@dimen/card_subtitle_size" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:alpha="0.4"
                                android:fontFamily="sans-serif-light"
                                android:gravity="center"
                                android:lineSpacingExtra="6dp"
                                android:lineSpacingMultiplier="1.2"
                                android:text="Works everywhere\nNo account needed\nSuper fast"
                                android:textColor="#607d8b"
                                android:textSize="@dimen/card_text_size" />

                        </LinearLayout>

                        <!-- Rounded overlay with proper corners -->
                        <View
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:background="@drawable/overlay_rounded_background" />

                        <LinearLayout
                            android:layout_width="match_parent"
                            android:layout_height="match_parent"
                            android:gravity="center"
                            android:orientation="vertical">

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:background="@drawable/coming_soon_rounded_background"
                                android:elevation="@dimen/card_elevation"
                                android:fontFamily="sans-serif-medium"
                                android:gravity="center"
                                android:letterSpacing="0.08"
                                android:paddingHorizontal="36dp"
                                android:paddingVertical="18dp"
                                android:text="COMING SOON"
                                android:textColor="@android:color/white"
                                android:textSize="@dimen/text_size_subtitle" />

                        </LinearLayout>

                    </FrameLayout>

                </LinearLayout>

            </LinearLayout>

        </FrameLayout>

    </LinearLayout>

    <!-- Centered Question Mark Button at Bottom with Glass Effect -->
    <FrameLayout
        android:id="@+id/questionMarkButton"
        android:layout_width="@dimen/question_button_size"
        android:layout_height="@dimen/question_button_size"
        android:layout_gravity="bottom|center_horizontal"
        android:layout_marginBottom="@dimen/question_button_bottom_margin"
        android:clickable="true"
        android:clipChildren="false"
        android:clipToPadding="false"
        android:elevation="12dp"
        android:focusable="true"
        android:padding="@dimen/margin_medium">

        <!-- 3D Sphere background with pressed state -->
        <View
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:background="@drawable/sphere_button_selector"
            android:duplicateParentState="true" />

        <TextView
            android:id="@+id/questionMarkIcon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:fontFamily="sans-serif-medium"
            android:shadowColor="#40000000"
            android:shadowDx="0"
            android:shadowDy="2"
            android:shadowRadius="4"
            android:text="?"
            android:textColor="@android:color/white"
            android:textSize="@dimen/question_icon_size" />

    </FrameLayout>

    <!-- Modal Overlay (initially hidden) -->
    <FrameLayout
        android:id="@+id/modalOverlay"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#C0000000"
        android:clickable="true"
        android:visibility="gone">

        <!-- Modal Content -->
        <LinearLayout
            android:id="@+id/modalContent"
            android:layout_width="@dimen/modal_width"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/modal_background"
            android:elevation="16dp"
            android:gravity="center"
            android:orientation="vertical"
            android:padding="@dimen/modal_padding">

            <!-- Icon -->
            <ImageView
                android:layout_width="80dp"
                android:layout_height="80dp"
                android:layout_marginBottom="@dimen/margin_large"
                android:alpha="0.95"
                android:contentDescription="WaterFountain logo"
                android:src="@drawable/logo" />

            <!-- Modal Title -->
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="@dimen/margin_medium"
                android:fontFamily="sans-serif-medium"
                android:gravity="center"
                android:letterSpacing="0.02"
                android:text="Why is this free?"
                android:textColor="@android:color/white"
                android:textSize="@dimen/modal_title_size" />

            <!-- Decorative line -->
            <View
                android:layout_width="60dp"
                android:layout_height="3dp"
                android:layout_marginBottom="@dimen/margin_large"
                android:alpha="0.4"
                android:background="@android:color/white" />

            <!-- Modal Message -->
            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="@dimen/margin_xlarge"
                android:alpha="0.95"
                android:fontFamily="sans-serif-light"
                android:gravity="center"
                android:lineSpacingExtra="10dp"
                android:lineSpacingMultiplier="1.3"
                android:text="Our spring water is completely free. Nature doesn't charge, so neither do we. Instead, we partner with local businesses who cover the cost to keep you hydrated.\n\nGet one every single day with your phone number"
                android:textColor="#FFFFFF"
                android:textSize="@dimen/modal_text_size" />

            <!-- Close Button -->
            <TextView
                android:id="@+id/closeModalButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/modal_button_background"
                android:clickable="true"
                android:elevation="4dp"
                android:focusable="true"
                android:fontFamily="sans-serif-medium"
                android:gravity="center"
                android:letterSpacing="0.05"
                android:paddingHorizontal="50dp"
                android:paddingVertical="20dp"
                android:text="Got it!"
                android:textColor="#263238"
                android:textSize="@dimen/modal_button_text_size" />

        </LinearLayout>

    </FrameLayout>

    <!-- Mock Mode Indicator (top-right corner) -->
    <include
        android:id="@+id/mockModeIndicator"
        layout="@layout/mock_mode_indicator"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top|end"
        android:layout_margin="16dp"
        android:visibility="gone" />

</FrameLayout>
